<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbmbnmbn - WebAR Experience</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: #000;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            z-index: 1000;
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
        }

        .loading.hidden {
            display: none;
        }

        .instructions {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <h2>ðŸŽ¯ nbmbnmbn</h2>
        <p>Cargando experiencia AR...</p>
        <p>Apunta tu cÃ¡mara al marcador</p>
    </div>

    <div class="instructions">
        <h3>ðŸ“± Instrucciones</h3>
        <p>â€¢ Permite el acceso a la cÃ¡mara</p>
        <p>â€¢ Apunta al marcador objetivo</p>
        <p>â€¢ MantÃ©n el dispositivo estable</p>
    </div>

        <a-scene 
        mindar-image="imageTargetSrc: ./target.mind; maxTrack: 1; uiLoading: no; uiScanning: no;"
        color-space="sRGB" 
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false">
        
        <a-assets>
            <video id="content-video" src="./assets/content_1757894920687_optimized.mp4" preload="auto" loop crossorigin="anonymous" playsinline webkit-playsinline></video>
        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <a-entity id="ar-content" mindar-image-target="targetIndex: 0">
            <a-video 
                id="ar-video"
                src="#content-video" 
                width="2" 
                height="1.5" 
                position="0 0 0"
                scale="1 1 1"
                material="transparent: true; alphaTest: 0.1"
                animation__appear="property: scale; from: 0 0 0; to: 1 1 1; dur: 1000; easing: easeOutBack; startEvents: targetFound"
                class="clickable">
              </a-video>
        </a-entity>
    </a-scene>

    <script>
        // Manejo de carga
        const loading = document.getElementById('loading');
        
        document.querySelector('a-scene').addEventListener('loaded', () => {
            console.log('âœ… Escena A-Frame cargada');
            setTimeout(() => {
                loading.classList.add('hidden');
            }, 2000);
        });

        // Eventos de tracking
        const arContent = document.querySelector('#ar-content');
        
        arContent.addEventListener('targetFound', () => {
            console.log('ðŸŽ¯ Target encontrado!');
            loading.classList.add('hidden');
        });

        arContent.addEventListener('targetLost', () => {
            console.log('âŒ Target perdido');
        });

        // Prevenir zoom
        document.addEventListener('gesturestart', e => e.preventDefault());
        document.addEventListener('gesturechange', e => e.preventDefault());
    </script>
</body>
</html>